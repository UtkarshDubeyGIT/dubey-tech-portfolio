---
title: "Building a Multilingual Healthcare Chatbot:  Lessons from Smart India Hackathon 2025"
publishedAt: "2025-10-18"
summary: "How we built a WhatsApp-based AI health assistant for rural India in 36 hours.  Learn about Dialogflow NLP, Twilio integration, MongoDB architecture, and designing for low-bandwidth, multilingual users."
image: "/images/projects/sehat-saathi/architecture.jpeg"
tag: "AI & Social Impact"
---

## The Problem:  Healthcare Access in Rural India

**73% of India's population lives in rural areas.  Only 25% have internet access.**

When Smart India Hackathon 2025 challenged us to solve preventive healthcare education, we knew traditional web apps wouldn't work. The solution?  **A WhatsApp-based AI chatbot that works on 2G networks and speaks Hindi.**

This is the story of building **Sehat Sathee** (Health Companion) in 36 hours‚Äîand the technical challenges that kept us awake. 

## The Constraints We Worked With

- **Platform**: WhatsApp (accessible to feature phone users)
- **Languages**: English, Hindi, and 8 regional languages
- **Bandwidth**: Must work on 2G (< 20kbps)
- **APIs**: Government health APIs (CoWIN, WHO, Health Ministry)
- **Time**: 36 hours (hackathon deadline)

## The Architecture: Four Moving Parts

```
User (WhatsApp)
    ‚Üì
Twilio WhatsApp API
    ‚Üì
Express.js Backend (Docker)
    ‚Üì
‚îú‚îÄ‚îÄ Dialogflow CX (NLP)
‚îú‚îÄ‚îÄ MongoDB (User data)
‚îî‚îÄ‚îÄ Government APIs (Health data)
```

### Tech Stack

| Layer         | Technology                | Why                               |
| ------------- | ------------------------- | --------------------------------- |
| Messaging     | Twilio WhatsApp Sandbox   | Easy testing, production-ready    |
| NLP           | Dialogflow CX             | Multilingual, intent detection    |
| Backend       | Node.js + Express         | Fast async I/O, easy webhooks     |
| Database      | MongoDB                   | Flexible schema, geospatial       |
| Deployment    | Docker + Render.com       | Containerized, auto-scaling       |
| Monitoring    | Winston (logging)         | Structured logs, error tracking   |

## Challenge #1: Natural Language Understanding

Users don't type "book vaccination appointment." They say: 

- "‡§ü‡•Ä‡§ï‡§æ ‡§≤‡§ó‡§µ‡§æ‡§®‡§æ ‡§π‡•à" (Hindi:  "Want to get vaccinated")
- "‡§ï‡§¨ ‡§ñ‡•Å‡§≤‡•Ä ‡§π‡•à centre?" (Hinglish mix)
- "My son needs vaccine. Where nearby?"

### Dialogflow CX: The NLP Brain

```javascript
// Webhook endpoint for Dialogflow fulfillment
app.post('/webhook/fulfillment', async (req, res) => {
  const { intentInfo, sessionInfo } = req.body
  const intent = intentInfo.displayName
  
  let response = {}
  
  switch (intent) {
    case 'VaccinationAppointment':
      response = await handleVaccination(sessionInfo. parameters)
      break
    
    case 'DiseaseOutbreakAlert':
      response = await getOutbreakAlerts(sessionInfo.parameters. location)
      break
    
    case 'VaccinationReminder':
      response = await scheduleReminder(sessionInfo.parameters)
      break
    
    default: 
      response = { fulfillmentText: 'I didn't understand.  Can you rephrase?' }
  }
  
  res.json(response)
})
```

### Intent Training Data (Multilingual)

```yaml
VaccinationAppointment: 
  - "Book vaccine appointment"
  - "I need vaccine"
  - "‡§ü‡•Ä‡§ï‡§æ ‡§ï‡§¨ ‡§Æ‡§ø‡§≤‡•á‡§ó‡§æ"  # Hindi
  - "‡≤µ‡≥ç‡≤Ø‡≤æ‡≤ï‡≥ç‡≤∏‡≤ø‡≤®‡≥á‡≤∂‡≤®‡≥ç ‡≤é‡≤≤‡≥ç‡≤≤‡≤ø‡≤¶‡≥Ü"  # Kannada
  - "‡§ü‡•Ä‡§ï‡§æ ‡§¨‡•Å‡§ï ‡§ï‡§∞‡§æ"  # Marathi

DiseaseOutbreakAlert: 
  - "Any disease in my area?"
  - "‡§ï‡•ç‡§Ø‡§æ ‡§Æ‡•á‡§∞‡•á ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à ‡§¨‡•Ä‡§Æ‡§æ‡§∞‡•Ä ‡§π‡•à"
  - "‡®Æ‡©á‡®∞‡©á ‡®á‡®≤‡®æ‡®ï‡©á ‡®µ‡®ø‡©±‡®ö ‡®ï‡©ã‡®à ‡®¨‡®ø‡®Æ‡®æ‡®∞‡©Ä"  # Punjabi
```

**Key Learning**: Train with *real* user language (typos, code-mixing, slang). Academic Hindi doesn't match rural speech.

## Challenge #2: WhatsApp Integration with Twilio

### Inbound Message Flow

1. User sends WhatsApp message to `+1 415 523 8886` (Twilio number)
2. Twilio POSTs to `https://our-backend.com/webhook/whatsapp`
3. Backend processes message ‚Üí Dialogflow NLP
4. Backend returns TwiML response
5. Twilio sends response to user

### Webhook Implementation

```javascript
app.post('/webhook/whatsapp', async (req, res) => {
  const { From:  userPhone, Body: message } = req. body
  
  try {
    // Get or create user session
    let user = await User.findOne({ phone: userPhone })
    if (!user) {
      user = await User.create({
        phone: userPhone,
        language: detectLanguage(message),
        chat_history: []
      })
    }
    
    // Send to Dialogflow for intent detection
    const dialogflowResponse = await detectIntent(message, user.sessionId)
    
    // Process fulfillment (DB queries, API calls)
    const fulfillment = await processFulfillment(dialogflowResponse, user)
    
    // Save conversation
    user.chat_history.push({
      user_message: message,
      bot_response: fulfillment. text,
      timestamp: new Date()
    })
    await user.save()
    
    // Return TwiML response
    const twiml = new MessagingResponse()
    twiml.message(fulfillment.text)
    
    res.writeHead(200, { 'Content-Type': 'text/xml' })
    res.end(twiml.toString())
    
  } catch (error) {
    console.error('Webhook error:', error)
    const twiml = new MessagingResponse()
    twiml.message('Sorry, I encountered an error. Please try again.')
    res.end(twiml.toString())
  }
})
```

### Testing Mode Setup

For hackathon demo, we used **Twilio Sandbox**:

1. Users text "join apart-trip" to `+1 415 523 8886`
2. Instantly connected to our bot
3. No approval delays (production WhatsApp needs Facebook Business verification)

## Challenge #3: Multilingual Support

Users from Karnataka speak Kannada, not Hindi or English. 

### Language Detection

```javascript
const detectLanguage = (text) => {
  // Simple heuristic: Check Unicode ranges
  if (/[\u0900-\u097F]/.test(text)) return 'hi' // Devanagari (Hindi)
  if (/[\u0C80-\u0CFF]/. test(text)) return 'kn' // Kannada
  if (/[\u0A00-\u0A7F]/.test(text)) return 'pa' // Punjabi
  return 'en' // Default to English
}
```

### Response Translation Pipeline

```javascript
const translateResponse = async (text, targetLang) => {
  if (targetLang === 'en') return text
  
  // Use Google Cloud Translation API
  const [translation] = await translate. translate(text, targetLang)
  return translation
}

// In webhook handler
const response = await translateResponse(
  fulfillment.text,
  user.language
)
```

**Optimization**: Cache common responses to reduce API calls (e.g., "Thank you" in 8 languages).

## Challenge #4: Government API Integration

### CoWIN API (Vaccination Centers)

```javascript
const findNearbyVaccinationCenters = async (pincode, date) => {
  const response = await fetch(
    `https://cdn-api.co-vin. in/api/v2/appointment/sessions/public/findByPin?pincode=${pincode}&date=${date}`,
    {
      headers: {
        'User-Agent': 'SIH2025-SehatSathee'
      }
    }
  )
  
  const data = await response.json()
  
  return data.sessions
    .filter(session => session.available_capacity > 0)
    .map(session => ({
      center_name: session.name,
      address: session.address,
      vaccine:  session.vaccine,
      available_slots: session.available_capacity,
      fee: session.fee
    }))
}
```

### WHO Disease Outbreak API

```javascript
const getOutbreakAlerts = async (state, district) => {
  // Check regional alerts from government database
  const alerts = await Alert.find({
    'affected_regions. state': state,
    'affected_regions.district': district,
    severity: { $in: ['High', 'Critical'] },
    expires_at: { $gt: new Date() }
  }).sort({ createdAt: -1 })
  
  return alerts. map(alert => ({
    title: alert.title,
    description: alert.description,
    severity: alert.severity,
    source: alert.source
  }))
}
```

**Key Insight**: Government APIs have rate limits and downtime. Always implement caching and fallbacks.

## Challenge #5: Database Schema for Health Data

### User Model

```javascript
const UserSchema = new mongoose.Schema({
  phone: {
    type:  String,
    required: true,
    unique: true,
    match: /^whatsapp:\+\d{10,15}$/
  },
  language: {
    type: String,
    enum: ['en', 'hi', 'kn', 'pa', 'mr', 'ta', 'te', 'bn', 'gu'],
    default: 'en'
  },
  location: {
    state: String,
    district: String,
    village: String,
    pincode: String,
    coordinates: {
      type: { type: String, default: 'Point' },
      coordinates: [Number] // [longitude, latitude]
    }
  },
  chat_history: [{
    user_message: String,
    bot_response: String,
    intent: String,
    timestamp: { type: Date, default: Date. now }
  }],
  subscribed_alerts: {
    type: Boolean,
    default: false
  },
  vaccination_id: String,
  last_active: { type: Date, default:  Date.now }
})

// Geospatial index for location-based queries
UserSchema.index({ 'location.coordinates': '2dsphere' })
```

### Appointment Model

```javascript
const AppointmentSchema = new mongoose.Schema({
  user_id: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User',
    required: true
  },
  vaccination_center: {
    center_id: String,
    name: String,
    address: String,
    pincode: String
  },
  appointment_date: {
    type:  Date,
    required: true
  },
  vaccine_type: {
    type: String,
    enum: ['Covishield', 'Covaxin', 'Sputnik V', 'Moderna', 'Pfizer']
  },
  status: {
    type: String,
    enum: ['Scheduled', 'Completed', 'Cancelled', 'Missed'],
    default: 'Scheduled'
  },
  reminder_sent: {
    type:  Boolean,
    default: false
  },
  reminders: [{
    sent_at: Date,
    type: { type: String, enum: ['1day', '3hours', '1hour'] }
  }]
})
```

### Alert Model

```javascript
const AlertSchema = new mongoose.Schema({
  title: { type: String, required: true },
  description: { type: String, required: true },
  severity:  {
    type: String,
    enum: ['Low', 'Medium', 'High', 'Critical'],
    required: true
  },
  source: {
    type: String,
    enum: ['WHO', 'CoWIN', 'Health Ministry', 'State Government']
  },
  affected_regions: [{
    state: String,
    district: String,
    villages: [String]
  }],
  broadcasted:  { type: Boolean, default: false },
  broadcast_count: { type: Number, default:  0 },
  expires_at: { type: Date, required: true },
  created_at: { type: Date, default:  Date.now }
})
```

## Challenge #6: Low-Bandwidth Optimization

Rural users on 2G networks can't wait 10 seconds for responses. 

### Optimization Strategies

#### 1. Text-Only Responses (No Media)

```javascript
// ‚ùå Bad: Send image with vaccination center locations
twiml.message().media('https://maps.googleapis.com/.. .')

// ‚úÖ Good: Send text directions
twiml.message(`
üìç Nearest Center:
Delhi PHC, Gandhi Road
Distance: 2.3 km
Available slots: 15
`
)
```

#### 2. Paginated Results

```javascript
// Don't send 50 vaccination centers at once
const centers = await findNearby(pincode)

twiml.message(`
Found ${centers.length} centers:

1. ${centers[0].name} - ${centers[0].distance}km
2. ${centers[1].name} - ${centers[1].distance}km
3. ${centers[2].name} - ${centers[2].distance}km

Reply "more" for next 3
`)
```

#### 3. Aggressive Caching

```javascript
// Cache government API responses (update every 6 hours)
const getCachedCenters = memoize(
  findNearbyVaccinationCenters,
  { maxAge: 6 * 60 * 60 * 1000 } // 6 hours
)
```

## Challenge #7: Docker Deployment

### Dockerfile

```dockerfile
FROM node:18-alpine

WORKDIR /app

# Install dependencies
COPY package*.json ./
RUN npm ci --only=production

# Copy app source
COPY . .

# Environment check
RUN if [ !  -f .env ]; then echo "ERROR: .env file missing!" && exit 1; fi

# Expose port
EXPOSE 3000

# Health check
HEALTHCHECK --interval=30s --timeout=3s \
  CMD node healthcheck.js || exit